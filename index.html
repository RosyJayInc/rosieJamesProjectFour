<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <link href="https://fonts.googleapis.com/css?family=Nunito:700,300,400|Oswald:500,700" rel="stylesheet">
    <link rel="stylesheet" href="public/styles/style.css">

    <script type='text/javascript' src='https://www.bing.com/api/maps/mapcontrol'></script>
    <script>
    
    function GetMap() {
            let navigationBarMode = Microsoft.Maps.NavigationBarMode;
            let map = new Microsoft.Maps.Map("#resultMap", {
                credentials: "Aps9Ru4I2VE16SVT-Uqa1m0_dnEV3AI15tq6yOCMbctU6mkJFtcs4CQiiet2bJvX",
                center: new Microsoft.Maps.Location(43.6482, -79.39782),
                mapTypeId: Microsoft.Maps.MapTypeId.road,
                navigationBarMode: navigationBarMode.minified,
                zoom: 12
            });

            console.log(map)

            // defining points of polygon here: boundaries of Toronto
            let points = [
                new Microsoft.Maps.Location(43.584721, -79.541365),
                new Microsoft.Maps.Location(43.610629, -79.567029),
                new Microsoft.Maps.Location(43.627276, -79.563436),
                new Microsoft.Maps.Location(43.625848, -79.575361),
                new Microsoft.Maps.Location(43.629626, -79.585825),

                new Microsoft.Maps.Location(43.644599, -79.591420),
                new Microsoft.Maps.Location(43.667592, -79.589045),
                new Microsoft.Maps.Location(43.743851, -79.648292),
                new Microsoft.Maps.Location(43.832546, -79.267848),
                new Microsoft.Maps.Location(43.798602, -79.132959),

                new Microsoft.Maps.Location(43.789980, -79.121711),
                new Microsoft.Maps.Location(43.667366, -79.103675),
                new Microsoft.Maps.Location(43.552493, -79.500425),
                new Microsoft.Maps.Location(43.584721, -79.541365)
            ]


            let polygon = new Microsoft.Maps.Polygon(points).setOptions({ fillColor: 'transparent' });

            // pushing the polygon into the map
            map.entities.push(polygon);

        }
    
    </script>
    

    <script src='https://code.jquery.com/jquery-3.2.1.min.js' integrity='sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4='
    crossorigin='anonymous'></script>
    <script src="https://www.gstatic.com/firebasejs/5.4.0/firebase.js"></script>
    <script src="public/scripts/main.js"></script>


    
    
    
    

</head>
<body onload="GetMap()">

    <header>
        <div class="wrapper">      
            <h1>Safe Cycle Toronto</h1>
            <p>Get a safety rating for the next place you want to lock up your bike, generated using historical data from the Toronto Police Service</p>
        </div>
    </header>

    <button class="info">?</button>

    <div class="infoBox">
        <h2>Welcome to Safe Cycle Toronto</h2>
        <p>To use this app, input the <span class="bold">exact address</span> where you will be locking up your bike, and using the Toronto Police Department's open source crime data, we will give you the number of bikes stolen within a 1km radius of this address in 2017.</p>
        <p>Across Toronto, these numbers range between 0 and approximately 600 so we have provided a relative safety rating based on this range.</p>
        <p>We want to make it safer to park your bike, so inputted address are all stored to a database. If a user has entered a "safe" area within 5km of your "unsafe" area, an option will be provided to get directions to this safer area.</p>
        <p>Happy biking!</p>
        <button class="close">x</button>
    </div>

    <main>
        <div class="wrapper">


            <div class="aboutText">
            </div>
        
            <div class="opening">
                <form action="" class="addressQuery">
                    <input type="text" class="queryText" placeholder="Enter your address here">
                    <input type="submit" class="querySubmit" value="get safety rating">
                </form>
            </div>

            <div class="line"></div>
            
            <div class="results">

                <div class="textResults">
                </div>

                <div class="separatingLine"></div>  

                <div id="resultMap" class="resultMapHidden">
                    <div id="scrollTo"></div>
                </div>
                
            </div>
            
            <div id="directions">   
            </div>
        
        </div> <!-- wrapper ends -->
    </main>

    <footer id="footer">
        <div class="wrapper">
            <p>Help protect your bike by registering it <a href="https://bike.torontopolice.on.ca/BicycleRegistry/">here.</a></p> 
            <p>Was your bike stolen? Report it <a href="https://www.torontopolice.on.ca/core/theft_under.php">here</a> and help expand the data</p> 
            <p class="copyright">&#169 2018 James MacDonald and Rosie Elphick</p>
        </div>
    </footer>
    
    

    
</body>
</html>